<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Projet domotifications: Référence de la classe ServeurWeb</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="projet-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Projet domotifications
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">BTS SNIR LaSalle Avignon 2023</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Recherche','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_serveur_web.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Fonctions membres publiques</a> &#124;
<a href="#pri-methods">Fonctions membres privées</a> &#124;
<a href="#pri-attribs">Attributs privés</a>  </div>
  <div class="headertitle">
<div class="title">Référence de la classe ServeurWeb</div>  </div>
</div><!--header-->
<div class="contents">

<p>Déclaration de la classe <a class="el" href="class_serveur_web.html" title="Déclaration de la classe ServeurWeb.">ServeurWeb</a>.  
 <a href="class_serveur_web.html#details">Plus de détails...</a></p>

<p><code>#include &lt;<a class="el" href="_serveur_web_8h_source.html">ServeurWeb.h</a>&gt;</code></p>
<div class="dynheader">
Graphe de collaboration de ServeurWeb:</div>
<div class="dyncontent">
<div class="center"><img src="class_serveur_web__coll__graph.png" border="0" usemap="#a_serveur_web_coll__map" alt="Collaboration graph"/></div>
<map name="a_serveur_web_coll__map" id="a_serveur_web_coll__map">
<area shape="rect" title="Déclaration de la classe ServeurWeb." alt="" coords="23,439,269,765"/>
<area shape="rect" href="class_web_server.html" title=" " alt="" coords="5,152,97,229"/>
<area shape="rect" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse." alt="" coords="121,5,360,376"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Fonctions membres publiques</h2></td></tr>
<tr class="memitem:a7147869e70008982dd3e2985326db7a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a7147869e70008982dd3e2985326db7a2">demarrer</a> ()</td></tr>
<tr class="memdesc:a7147869e70008982dd3e2985326db7a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Démarre le serveur web et installe les gestionnaires de requêtes.  <a href="class_serveur_web.html#a7147869e70008982dd3e2985326db7a2">Plus de détails...</a><br /></td></tr>
<tr class="separator:a7147869e70008982dd3e2985326db7a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab2f7232f0b1a6a72faf2731111c87c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#acab2f7232f0b1a6a72faf2731111c87c">ServeurWeb</a> (<a class="el" href="class_station_lumineuse.html">StationLumineuse</a> *<a class="el" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>)</td></tr>
<tr class="memdesc:acab2f7232f0b1a6a72faf2731111c87c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructeur de la classe <a class="el" href="class_serveur_web.html" title="Déclaration de la classe ServeurWeb.">ServeurWeb</a>.  <a href="class_serveur_web.html#acab2f7232f0b1a6a72faf2731111c87c">Plus de détails...</a><br /></td></tr>
<tr class="separator:acab2f7232f0b1a6a72faf2731111c87c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae67b92478d41e2b4c9b8b172c6360418"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#ae67b92478d41e2b4c9b8b172c6360418">traiterRequetes</a> ()</td></tr>
<tr class="memdesc:ae67b92478d41e2b4c9b8b172c6360418"><td class="mdescLeft">&#160;</td><td class="mdescRight">traite les requêtes reçues par le serveur web  <a href="class_serveur_web.html#ae67b92478d41e2b4c9b8b172c6360418">Plus de détails...</a><br /></td></tr>
<tr class="separator:ae67b92478d41e2b4c9b8b172c6360418"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Fonctions membres privées</h2></td></tr>
<tr class="memitem:a5f26f8eccef15a8c0097c63be61b526c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a5f26f8eccef15a8c0097c63be61b526c">afficherAccueil</a> ()</td></tr>
<tr class="memdesc:a5f26f8eccef15a8c0097c63be61b526c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Affiche la page d'accueil du serveur web.  <a href="class_serveur_web.html#a5f26f8eccef15a8c0097c63be61b526c">Plus de détails...</a><br /></td></tr>
<tr class="separator:a5f26f8eccef15a8c0097c63be61b526c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c6c900eb56c93d7755b4acfee01d0d6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a3c6c900eb56c93d7755b4acfee01d0d6">extraireEtat</a> ()</td></tr>
<tr class="memdesc:a3c6c900eb56c93d7755b4acfee01d0d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extrait l'état dans les données JSON.  <a href="class_serveur_web.html#a3c6c900eb56c93d7755b4acfee01d0d6">Plus de détails...</a><br /></td></tr>
<tr class="separator:a3c6c900eb56c93d7755b4acfee01d0d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f7bf79f60507ab05e101758c5cd15c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a2f7bf79f60507ab05e101758c5cd15c8">extraireId</a> ()</td></tr>
<tr class="memdesc:a2f7bf79f60507ab05e101758c5cd15c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extrait l'id dans les données JSON.  <a href="class_serveur_web.html#a2f7bf79f60507ab05e101758c5cd15c8">Plus de détails...</a><br /></td></tr>
<tr class="separator:a2f7bf79f60507ab05e101758c5cd15c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60f62c9f2a9f49f38870f745c92aea5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a60f62c9f2a9f49f38870f745c92aea5c">installerGestionnairesRequetes</a> ()</td></tr>
<tr class="memdesc:a60f62c9f2a9f49f38870f745c92aea5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installe les gestionnaires de requêtes.  <a href="class_serveur_web.html#a60f62c9f2a9f49f38870f745c92aea5c">Plus de détails...</a><br /></td></tr>
<tr class="separator:a60f62c9f2a9f49f38870f745c92aea5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab533334d7ff03f38d7e36bae6a34891e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#ab533334d7ff03f38d7e36bae6a34891e">setNom</a> (String nomStationLumineuse=<a class="el" href="_serveur_web_8h.html#ab71e20e2b03332d5786123f061dac79e">NOM_SERVEUR_WEB</a>)</td></tr>
<tr class="memdesc:ab533334d7ff03f38d7e36bae6a34891e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Définit le nom du serveur Web.  <a href="class_serveur_web.html#ab533334d7ff03f38d7e36bae6a34891e">Plus de détails...</a><br /></td></tr>
<tr class="separator:ab533334d7ff03f38d7e36bae6a34891e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb054b74041143a9d10471a4b39beb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#aedb054b74041143a9d10471a4b39beb6">traiterRequeteGETActivations</a> ()</td></tr>
<tr class="memdesc:aedb054b74041143a9d10471a4b39beb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite une requête GET pour obtenir les états d'activation.  <a href="class_serveur_web.html#aedb054b74041143a9d10471a4b39beb6">Plus de détails...</a><br /></td></tr>
<tr class="separator:aedb054b74041143a9d10471a4b39beb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f9ef4cc49060dcba4bb960eff6bc82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#ad1f9ef4cc49060dcba4bb960eff6bc82">traiterRequeteGETBoite</a> ()</td></tr>
<tr class="memdesc:ad1f9ef4cc49060dcba4bb960eff6bc82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite une requête HTTP GET relative à la boîte aux lettres.  <a href="class_serveur_web.html#ad1f9ef4cc49060dcba4bb960eff6bc82">Plus de détails...</a><br /></td></tr>
<tr class="separator:ad1f9ef4cc49060dcba4bb960eff6bc82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab815415ef0f7fa926d278eeca262badd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#ab815415ef0f7fa926d278eeca262badd">traiterRequeteGETMachine</a> ()</td></tr>
<tr class="memdesc:ab815415ef0f7fa926d278eeca262badd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite une requête HTTP GET relative à une machine.  <a href="class_serveur_web.html#ab815415ef0f7fa926d278eeca262badd">Plus de détails...</a><br /></td></tr>
<tr class="separator:ab815415ef0f7fa926d278eeca262badd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45026dbf6cea60651ece33b7ea8f0b01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a45026dbf6cea60651ece33b7ea8f0b01">traiterRequeteGETNotifications</a> ()</td></tr>
<tr class="memdesc:a45026dbf6cea60651ece33b7ea8f0b01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite la requête GET pour obtenir l'état des notifications.  <a href="class_serveur_web.html#a45026dbf6cea60651ece33b7ea8f0b01">Plus de détails...</a><br /></td></tr>
<tr class="separator:a45026dbf6cea60651ece33b7ea8f0b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d7d95c807505d42c9ffd0b6ed62198"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a97d7d95c807505d42c9ffd0b6ed62198">traiterRequeteGETPoubelle</a> ()</td></tr>
<tr class="memdesc:a97d7d95c807505d42c9ffd0b6ed62198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite une requête HTTP GET relative à une poubelle.  <a href="class_serveur_web.html#a97d7d95c807505d42c9ffd0b6ed62198">Plus de détails...</a><br /></td></tr>
<tr class="separator:a97d7d95c807505d42c9ffd0b6ed62198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaecca9c5962378e9adb491b935371dd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#aaecca9c5962378e9adb491b935371dd8">traiterRequeteNonTrouvee</a> ()</td></tr>
<tr class="memdesc:aaecca9c5962378e9adb491b935371dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite une requête qui n'a pas été trouvée.  <a href="class_serveur_web.html#aaecca9c5962378e9adb491b935371dd8">Plus de détails...</a><br /></td></tr>
<tr class="separator:aaecca9c5962378e9adb491b935371dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd981d35334c49dffc5bdab2ebc8dea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#aefd981d35334c49dffc5bdab2ebc8dea">traiterRequetePOSTActivation</a> ()</td></tr>
<tr class="memdesc:aefd981d35334c49dffc5bdab2ebc8dea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite une requête POST pour modifier les activations.  <a href="class_serveur_web.html#aefd981d35334c49dffc5bdab2ebc8dea">Plus de détails...</a><br /></td></tr>
<tr class="separator:aefd981d35334c49dffc5bdab2ebc8dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae07d478b576b3bb9c71f2d5e3a8c36e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#aae07d478b576b3bb9c71f2d5e3a8c36e">traiterRequetePOSTBoite</a> ()</td></tr>
<tr class="memdesc:aae07d478b576b3bb9c71f2d5e3a8c36e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite la requête POST de la boîte aux lettres.  <a href="class_serveur_web.html#aae07d478b576b3bb9c71f2d5e3a8c36e">Plus de détails...</a><br /></td></tr>
<tr class="separator:aae07d478b576b3bb9c71f2d5e3a8c36e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7eadfab5c95b0789003a5c436998638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#af7eadfab5c95b0789003a5c436998638">traiterRequetePOSTMachine</a> ()</td></tr>
<tr class="memdesc:af7eadfab5c95b0789003a5c436998638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite la requête POST pour modifier l'état d'une machine.  <a href="class_serveur_web.html#af7eadfab5c95b0789003a5c436998638">Plus de détails...</a><br /></td></tr>
<tr class="separator:af7eadfab5c95b0789003a5c436998638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cee2b47156893da6dd682cd55e91d70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a0cee2b47156893da6dd682cd55e91d70">traiterRequetePOSTPoubelle</a> ()</td></tr>
<tr class="memdesc:a0cee2b47156893da6dd682cd55e91d70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traite la requête POST pour modifier l'état d'une poubelle.  <a href="class_serveur_web.html#a0cee2b47156893da6dd682cd55e91d70">Plus de détails...</a><br /></td></tr>
<tr class="separator:a0cee2b47156893da6dd682cd55e91d70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Attributs privés</h2></td></tr>
<tr class="memitem:a4566392acbd1940336f6a527ba44af75"><td class="memItemLeft" align="right" valign="top">StaticJsonDocument&lt; <a class="el" href="_serveur_web_8h.html#a11a025c8bafe7b0ac9a8cf71dab9e79e">TAILLE_JSON</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a></td></tr>
<tr class="separator:a4566392acbd1940336f6a527ba44af75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d37983975578b93e06b8792eb5943c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_station_lumineuse.html">StationLumineuse</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a></td></tr>
<tr class="separator:a8d37983975578b93e06b8792eb5943c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description détaillée</h2>
<div class="textblock"><p>Déclaration de la classe <a class="el" href="class_serveur_web.html" title="Déclaration de la classe ServeurWeb.">ServeurWeb</a>. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8h_source.html#l00040">40</a> du fichier <a class="el" href="_serveur_web_8h_source.html">ServeurWeb.h</a>.</p>
</div><h2 class="groupheader">Documentation des constructeurs et destructeur</h2>
<a id="acab2f7232f0b1a6a72faf2731111c87c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acab2f7232f0b1a6a72faf2731111c87c">&#9670;&nbsp;</a></span>ServeurWeb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ServeurWeb::ServeurWeb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_station_lumineuse.html">StationLumineuse</a> *&#160;</td>
          <td class="paramname"><em>stationLumineuse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructeur de la classe <a class="el" href="class_serveur_web.html" title="Déclaration de la classe ServeurWeb.">ServeurWeb</a>. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">stationLumineuse</td><td>Pointeur vers l'objet de la classe <a class="el" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse.">StationLumineuse</a></td></tr>
  </table>
  </dd>
</dl>
<p>Initialise un nouvel objet <a class="el" href="class_serveur_web.html" title="Déclaration de la classe ServeurWeb.">ServeurWeb</a> en utilisant le constructeur de la classe de base <a class="el" href="class_web_server.html">WebServer</a>. Le pointeur vers l'objet de la classe <a class="el" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse.">StationLumineuse</a> est stocké dans la variable membre stationLumineuse. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00019">19</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                                                         :</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <a class="code" href="class_web_server.html">WebServer</a>(<a class="code" href="_serveur_web_8h.html#acada9ad8dacc7ad524c257f091b13f01">PORT_SERVEUR_WEB</a>), <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>)</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;{</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;}</div>
<div class="ttc" id="a_serveur_web_8h_html_acada9ad8dacc7ad524c257f091b13f01"><div class="ttname"><a href="_serveur_web_8h.html#acada9ad8dacc7ad524c257f091b13f01">PORT_SERVEUR_WEB</a></div><div class="ttdeci">#define PORT_SERVEUR_WEB</div><div class="ttdoc">Le numéro de port du serveur web.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8h_source.html#l00026">ServeurWeb.h:26</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_a8d37983975578b93e06b8792eb5943c4"><div class="ttname"><a href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">ServeurWeb::stationLumineuse</a></div><div class="ttdeci">StationLumineuse * stationLumineuse</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8h_source.html#l00043">ServeurWeb.h:43</a></div></div>
<div class="ttc" id="aclass_web_server_html"><div class="ttname"><a href="class_web_server.html">WebServer</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentation des fonctions membres</h2>
<a id="a5f26f8eccef15a8c0097c63be61b526c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f26f8eccef15a8c0097c63be61b526c">&#9670;&nbsp;</a></span>afficherAccueil()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::afficherAccueil </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Affiche la page d'accueil du serveur web. </p>
<p>Affiche la page d'accueil du serveur web contenant un titre "Bienvenue sur la station de notifications lumineuses" ainsi qu'un message indiquant la version de la station ("LaSalle Avignon v0.1"). La méthode utilise la fonction send() pour envoyer la réponse au client HTTP avec un code de statut 200 et un type de contenu "text/html" </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00143">143</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::afficherAccueil() : requête = &quot;</span>));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    String message = <span class="stringliteral">&quot;&lt;h1&gt;Bienvenue sur la station de notifications lumineuses&lt;/h1&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    message += <span class="stringliteral">&quot;&lt;p&gt;LaSalle Avignon v1.0&lt;/p&gt;\n&quot;</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    send(200, F(<span class="stringliteral">&quot;text/html&quot;</span>), message);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="a7147869e70008982dd3e2985326db7a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7147869e70008982dd3e2985326db7a2">&#9670;&nbsp;</a></span>demarrer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::demarrer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Démarre le serveur web et installe les gestionnaires de requêtes. </p>
<p>Cette méthode configure et démarre le serveur Web. Elle définit les gestionnaires de requêtes pour les différentes routes, puis démarre le serveur en utilisant la méthode begin(). Le serveur sera accessible à partir de l'adresse IP locale obtenue via la connexion WiFi. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00030">30</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="class_serveur_web.html#ab533334d7ff03f38d7e36bae6a34891e">setNom</a>();</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::demarrer() : adresse IP = &quot;</span>));</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    Serial.println(WiFi.localIP());</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// Installe les gestionnaires de requêtes</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    on(<span class="stringliteral">&quot;/&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#a5f26f8eccef15a8c0097c63be61b526c">ServeurWeb::afficherAccueil</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    on(<span class="stringliteral">&quot;/notifications&quot;</span>, std::bind(&amp;<a class="code" href="class_serveur_web.html#a45026dbf6cea60651ece33b7ea8f0b01">ServeurWeb::traiterRequeteGETNotifications</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    on(<span class="stringliteral">&quot;/activations&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#aedb054b74041143a9d10471a4b39beb6">ServeurWeb::traiterRequeteGETActivations</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    on(<span class="stringliteral">&quot;/activation&quot;</span>, HTTP_POST, std::bind(&amp;<a class="code" href="class_serveur_web.html#aefd981d35334c49dffc5bdab2ebc8dea">ServeurWeb::traiterRequetePOSTActivation</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    on(<span class="stringliteral">&quot;/boite&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#ad1f9ef4cc49060dcba4bb960eff6bc82">ServeurWeb::traiterRequeteGETBoite</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    on(<span class="stringliteral">&quot;/boite&quot;</span>, HTTP_POST, std::bind(&amp;<a class="code" href="class_serveur_web.html#aae07d478b576b3bb9c71f2d5e3a8c36e">ServeurWeb::traiterRequetePOSTBoite</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    on(<span class="stringliteral">&quot;/machine&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#ab815415ef0f7fa926d278eeca262badd">ServeurWeb::traiterRequeteGETMachine</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    on(<span class="stringliteral">&quot;/machine&quot;</span>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;       HTTP_POST,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;       std::bind(&amp;<a class="code" href="class_serveur_web.html#af7eadfab5c95b0789003a5c436998638">ServeurWeb::traiterRequetePOSTMachine</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                 <span class="keyword">this</span>)); <span class="comment">// Ajout de la route /machine en POST</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    on(<span class="stringliteral">&quot;/poubelle&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#a97d7d95c807505d42c9ffd0b6ed62198">ServeurWeb::traiterRequeteGETPoubelle</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    on(<span class="stringliteral">&quot;/poubelle&quot;</span>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;       HTTP_POST,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;       std::bind(&amp;<a class="code" href="class_serveur_web.html#a0cee2b47156893da6dd682cd55e91d70">ServeurWeb::traiterRequetePOSTPoubelle</a>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                 <span class="keyword">this</span>)); <span class="comment">// Ajout de la route /poubelle en POST</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    onNotFound(std::bind(&amp;<a class="code" href="class_serveur_web.html#aaecca9c5962378e9adb491b935371dd8">ServeurWeb::traiterRequeteNonTrouvee</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// Démarre le serveur</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    begin();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    Serial.println(F(<span class="stringliteral">&quot;ServeurWeb::demarrer() ok&quot;</span>));</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
<div class="ttc" id="aclass_serveur_web_html_a0cee2b47156893da6dd682cd55e91d70"><div class="ttname"><a href="class_serveur_web.html#a0cee2b47156893da6dd682cd55e91d70">ServeurWeb::traiterRequetePOSTPoubelle</a></div><div class="ttdeci">void traiterRequetePOSTPoubelle()</div><div class="ttdoc">Traite la requête POST pour modifier l'état d'une poubelle.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00775">ServeurWeb.cpp:775</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_a45026dbf6cea60651ece33b7ea8f0b01"><div class="ttname"><a href="class_serveur_web.html#a45026dbf6cea60651ece33b7ea8f0b01">ServeurWeb::traiterRequeteGETNotifications</a></div><div class="ttdeci">void traiterRequeteGETNotifications()</div><div class="ttdoc">Traite la requête GET pour obtenir l'état des notifications.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00164">ServeurWeb.cpp:164</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_a5f26f8eccef15a8c0097c63be61b526c"><div class="ttname"><a href="class_serveur_web.html#a5f26f8eccef15a8c0097c63be61b526c">ServeurWeb::afficherAccueil</a></div><div class="ttdeci">void afficherAccueil()</div><div class="ttdoc">Affiche la page d'accueil du serveur web.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00143">ServeurWeb.cpp:143</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_a97d7d95c807505d42c9ffd0b6ed62198"><div class="ttname"><a href="class_serveur_web.html#a97d7d95c807505d42c9ffd0b6ed62198">ServeurWeb::traiterRequeteGETPoubelle</a></div><div class="ttdeci">void traiterRequeteGETPoubelle()</div><div class="ttdoc">Traite une requête HTTP GET relative à une poubelle.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00676">ServeurWeb.cpp:676</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_aae07d478b576b3bb9c71f2d5e3a8c36e"><div class="ttname"><a href="class_serveur_web.html#aae07d478b576b3bb9c71f2d5e3a8c36e">ServeurWeb::traiterRequetePOSTBoite</a></div><div class="ttdeci">void traiterRequetePOSTBoite()</div><div class="ttdoc">Traite la requête POST de la boîte aux lettres.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00431">ServeurWeb.cpp:431</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_aaecca9c5962378e9adb491b935371dd8"><div class="ttname"><a href="class_serveur_web.html#aaecca9c5962378e9adb491b935371dd8">ServeurWeb::traiterRequeteNonTrouvee</a></div><div class="ttdeci">void traiterRequeteNonTrouvee()</div><div class="ttdoc">Traite une requête qui n'a pas été trouvée.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00866">ServeurWeb.cpp:866</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_ab533334d7ff03f38d7e36bae6a34891e"><div class="ttname"><a href="class_serveur_web.html#ab533334d7ff03f38d7e36bae6a34891e">ServeurWeb::setNom</a></div><div class="ttdeci">void setNom(String nomStationLumineuse=NOM_SERVEUR_WEB)</div><div class="ttdoc">Définit le nom du serveur Web.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00085">ServeurWeb.cpp:85</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_ab815415ef0f7fa926d278eeca262badd"><div class="ttname"><a href="class_serveur_web.html#ab815415ef0f7fa926d278eeca262badd">ServeurWeb::traiterRequeteGETMachine</a></div><div class="ttdeci">void traiterRequeteGETMachine()</div><div class="ttdoc">Traite une requête HTTP GET relative à une machine.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00506">ServeurWeb.cpp:506</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_ad1f9ef4cc49060dcba4bb960eff6bc82"><div class="ttname"><a href="class_serveur_web.html#ad1f9ef4cc49060dcba4bb960eff6bc82">ServeurWeb::traiterRequeteGETBoite</a></div><div class="ttdeci">void traiterRequeteGETBoite()</div><div class="ttdoc">Traite une requête HTTP GET relative à la boîte aux lettres.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00374">ServeurWeb.cpp:374</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_aedb054b74041143a9d10471a4b39beb6"><div class="ttname"><a href="class_serveur_web.html#aedb054b74041143a9d10471a4b39beb6">ServeurWeb::traiterRequeteGETActivations</a></div><div class="ttdeci">void traiterRequeteGETActivations()</div><div class="ttdoc">Traite une requête GET pour obtenir les états d'activation.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00203">ServeurWeb.cpp:203</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_aefd981d35334c49dffc5bdab2ebc8dea"><div class="ttname"><a href="class_serveur_web.html#aefd981d35334c49dffc5bdab2ebc8dea">ServeurWeb::traiterRequetePOSTActivation</a></div><div class="ttdeci">void traiterRequetePOSTActivation()</div><div class="ttdoc">Traite une requête POST pour modifier les activations.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00249">ServeurWeb.cpp:249</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_af7eadfab5c95b0789003a5c436998638"><div class="ttname"><a href="class_serveur_web.html#af7eadfab5c95b0789003a5c436998638">ServeurWeb::traiterRequetePOSTMachine</a></div><div class="ttdeci">void traiterRequetePOSTMachine()</div><div class="ttdoc">Traite la requête POST pour modifier l'état d'une machine.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00605">ServeurWeb.cpp:605</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8cpp_source.html#l00143">afficherAccueil()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00085">setNom()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00203">traiterRequeteGETActivations()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00374">traiterRequeteGETBoite()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00506">traiterRequeteGETMachine()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00164">traiterRequeteGETNotifications()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00676">traiterRequeteGETPoubelle()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00866">traiterRequeteNonTrouvee()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00249">traiterRequetePOSTActivation()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00431">traiterRequetePOSTBoite()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00605">traiterRequetePOSTMachine()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00775">traiterRequetePOSTPoubelle()</a>.</p>

</div>
</div>
<a id="a3c6c900eb56c93d7755b4acfee01d0d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c6c900eb56c93d7755b4acfee01d0d6">&#9670;&nbsp;</a></span>extraireEtat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ServeurWeb::extraireEtat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extrait l'état dans les données JSON. </p>
<dl class="section return"><dt>Renvoie</dt><dd>bool </dd></dl>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00914">914</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;{</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    JsonObject objetJSON = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.as&lt;JsonObject&gt;();</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">if</span>(objetJSON.containsKey(<span class="stringliteral">&quot;etat&quot;</span>))</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;etat : &quot;</span>));</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;bool&gt;());</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
<div class="ttc" id="aclass_serveur_web_html_a4566392acbd1940336f6a527ba44af75"><div class="ttname"><a href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">ServeurWeb::documentJSON</a></div><div class="ttdeci">StaticJsonDocument&lt; TAILLE_JSON &gt; documentJSON</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8h_source.html#l00044">ServeurWeb.h:44</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00605">traiterRequetePOSTMachine()</a>.</p>

</div>
</div>
<a id="a2f7bf79f60507ab05e101758c5cd15c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f7bf79f60507ab05e101758c5cd15c8">&#9670;&nbsp;</a></span>extraireId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ServeurWeb::extraireId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extrait l'id dans les données JSON. </p>
<dl class="section return"><dt>Renvoie</dt><dd>int l'id du module ou -1 </dd></dl>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00895">895</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;{</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    JsonObject objetJSON = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.as&lt;JsonObject&gt;();</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span>(objetJSON.containsKey(<span class="stringliteral">&quot;id&quot;</span>))</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;id : &quot;</span>));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;id&quot;</span>].as&lt;int&gt;());</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;id&quot;</span>].as&lt;<span class="keywordtype">int</span>&gt;();</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00605">traiterRequetePOSTMachine()</a>.</p>

</div>
</div>
<a id="a60f62c9f2a9f49f38870f745c92aea5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60f62c9f2a9f49f38870f745c92aea5c">&#9670;&nbsp;</a></span>installerGestionnairesRequetes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::installerGestionnairesRequetes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Installe les gestionnaires de requêtes. </p>
<p>Cette méthode installe les gestionnaires de requêtes pour les différentes routes du serveur Web. Les gestionnaires sont définis à l'aide de la méthode on(). Les routes sont associées aux méthodes de traitement des requêtes correspondantes. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00110">110</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    on(<span class="stringliteral">&quot;/&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#a5f26f8eccef15a8c0097c63be61b526c">ServeurWeb::afficherAccueil</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    on(<span class="stringliteral">&quot;/notifications&quot;</span>, std::bind(&amp;<a class="code" href="class_serveur_web.html#a45026dbf6cea60651ece33b7ea8f0b01">ServeurWeb::traiterRequeteGETNotifications</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    on(<span class="stringliteral">&quot;/activations&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#aedb054b74041143a9d10471a4b39beb6">ServeurWeb::traiterRequeteGETActivations</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    on(<span class="stringliteral">&quot;/activation&quot;</span>, HTTP_POST, std::bind(&amp;<a class="code" href="class_serveur_web.html#aefd981d35334c49dffc5bdab2ebc8dea">ServeurWeb::traiterRequetePOSTActivation</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    on(<span class="stringliteral">&quot;/boite&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#ad1f9ef4cc49060dcba4bb960eff6bc82">ServeurWeb::traiterRequeteGETBoite</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    on(<span class="stringliteral">&quot;/boite&quot;</span>, HTTP_POST, std::bind(&amp;<a class="code" href="class_serveur_web.html#aae07d478b576b3bb9c71f2d5e3a8c36e">ServeurWeb::traiterRequetePOSTBoite</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    on(<span class="stringliteral">&quot;/machine&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#ab815415ef0f7fa926d278eeca262badd">ServeurWeb::traiterRequeteGETMachine</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    on(<span class="stringliteral">&quot;/machine&quot;</span>,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;       HTTP_POST,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;       std::bind(&amp;<a class="code" href="class_serveur_web.html#af7eadfab5c95b0789003a5c436998638">ServeurWeb::traiterRequetePOSTMachine</a>,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                 <span class="keyword">this</span>)); <span class="comment">// Ajout de la route /machine en POST</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    on(<span class="stringliteral">&quot;/poubelle&quot;</span>, HTTP_GET, std::bind(&amp;<a class="code" href="class_serveur_web.html#a97d7d95c807505d42c9ffd0b6ed62198">ServeurWeb::traiterRequeteGETPoubelle</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    on(<span class="stringliteral">&quot;/poubelle&quot;</span>,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;       HTTP_POST,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;       std::bind(&amp;<a class="code" href="class_serveur_web.html#a0cee2b47156893da6dd682cd55e91d70">ServeurWeb::traiterRequetePOSTPoubelle</a>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                 <span class="keyword">this</span>)); <span class="comment">// Ajout de la route /poubelle en POST</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    onNotFound(std::bind(&amp;<a class="code" href="class_serveur_web.html#aaecca9c5962378e9adb491b935371dd8">ServeurWeb::traiterRequeteNonTrouvee</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8cpp_source.html#l00143">afficherAccueil()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00203">traiterRequeteGETActivations()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00374">traiterRequeteGETBoite()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00506">traiterRequeteGETMachine()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00164">traiterRequeteGETNotifications()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00676">traiterRequeteGETPoubelle()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00866">traiterRequeteNonTrouvee()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00249">traiterRequetePOSTActivation()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00431">traiterRequetePOSTBoite()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00605">traiterRequetePOSTMachine()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00775">traiterRequetePOSTPoubelle()</a>.</p>

</div>
</div>
<a id="ab533334d7ff03f38d7e36bae6a34891e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab533334d7ff03f38d7e36bae6a34891e">&#9670;&nbsp;</a></span>setNom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::setNom </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>nomStationLumineuse</em> = <code><a class="el" href="_serveur_web_8h.html#ab71e20e2b03332d5786123f061dac79e">NOM_SERVEUR_WEB</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Définit le nom du serveur Web. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">nomStationLumineuse</td><td>Le nom du serveur Web à utiliser</td></tr>
  </table>
  </dd>
</dl>
<p>Cette méthode permet de définir le nom du serveur Web. Si aucun nom n'est spécifié, le nom par défaut NOM_SERVEUR_WEB sera utilisé. Le serveur sera accessible à partir de l'adresse <a href="http://nomStationLumineuse.local/">http://nomStationLumineuse.local/</a>. La méthode utilise le service mDNS pour permettre l'accès au serveur avec un nom d'hôte convivial. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00085">85</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span>(nomStationLumineuse.isEmpty())</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        nomStationLumineuse = <a class="code" href="_serveur_web_8h.html#ab71e20e2b03332d5786123f061dac79e">NOM_SERVEUR_WEB</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// Pour un accès : http://nomStationLumineuse.local/</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span>(!MDNS.begin(nomStationLumineuse.c_str()))</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        Serial.println(F(<span class="stringliteral">&quot;setNom() Erreur mDNS !&quot;</span>));</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        Serial.println(<span class="stringliteral">&quot;setNom() http://&quot;</span> + nomStationLumineuse + <span class="stringliteral">&quot;.local/&quot;</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="ttc" id="a_serveur_web_8h_html_ab71e20e2b03332d5786123f061dac79e"><div class="ttname"><a href="_serveur_web_8h.html#ab71e20e2b03332d5786123f061dac79e">NOM_SERVEUR_WEB</a></div><div class="ttdeci">#define NOM_SERVEUR_WEB</div><div class="ttdoc">Le nom du serveur web (http://station-lumineuse.local/)</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8h_source.html#l00020">ServeurWeb.h:20</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00020">NOM_SERVEUR_WEB</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>.</p>

</div>
</div>
<a id="aedb054b74041143a9d10471a4b39beb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb054b74041143a9d10471a4b39beb6">&#9670;&nbsp;</a></span>traiterRequeteGETActivations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequeteGETActivations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite une requête GET pour obtenir les états d'activation. </p>
<p>Cette méthode traite une requête GET pour obtenir les états d'activation de la station lumineuse. Elle récupère les états d'activation de la boîte aux lettres, des machines et des poubelles à l'aide des méthodes appropriées de la classe <a class="el" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse.">StationLumineuse</a>, puis les stocke dans un document JSON. Le document JSON est ensuite envoyé en réponse à la requête. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00203">203</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequeteGETActivations() : requête = &quot;</span>));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.clear();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;boite&quot;</span>] =</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        -&gt;<a class="code" href="class_station_lumineuse.html#a3d598a93387fff7407d3b8193c00ba88">getActivationBoiteAuxLettres</a>(); <span class="comment">// Remplacez par la méthode appropriée pour obtenir l&#39;état</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                          <span class="comment">// d&#39;activation de la boîte aux lettres</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    JsonArray machines = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.createNestedArray(<span class="stringliteral">&quot;machines&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="_station_lumineuse_8h.html#a23c3f5a0129dad47f58c8433901d206e">NB_LEDS_NOTIFICATION_MACHINES</a>; ++i)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        machines.add(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ad88bf059adefd5ee17a0fd21c63d5ff1">getActivationMachine</a>(</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;          i)); <span class="comment">// Remplacez par la méthode appropriée pour obtenir l&#39;état d&#39;activation de la machine</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    JsonArray poubelles = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.createNestedArray(<span class="stringliteral">&quot;poubelles&quot;</span>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="_station_lumineuse_8h.html#ae5598b0513d99829f679ebfca011e485">NB_LEDS_NOTIFICATION_POUBELLES</a>; ++i)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        poubelles.add(</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a8845e192dd651a35175462c0e7950a87">getActivationPoubelle</a>(i)); <span class="comment">// Remplacez par la méthode appropriée pour</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                                       <span class="comment">// obtenir l&#39;état d&#39;activation de la poubelle</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;JSON : &quot;</span>));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    serializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, Serial);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    Serial.println();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordtype">char</span> buffer[<a class="code" href="_serveur_web_8h.html#a11a025c8bafe7b0ac9a8cf71dab9e79e">TAILLE_JSON</a>];</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    serializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, buffer);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    send(200, <span class="stringliteral">&quot;application/json&quot;</span>, buffer);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="ttc" id="a_serveur_web_8h_html_a11a025c8bafe7b0ac9a8cf71dab9e79e"><div class="ttname"><a href="_serveur_web_8h.html#a11a025c8bafe7b0ac9a8cf71dab9e79e">TAILLE_JSON</a></div><div class="ttdeci">#define TAILLE_JSON</div><div class="ttdoc">Définit la taille en octets max pour un document JSON.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8h_source.html#l00032">ServeurWeb.h:32</a></div></div>
<div class="ttc" id="a_station_lumineuse_8h_html_a23c3f5a0129dad47f58c8433901d206e"><div class="ttname"><a href="_station_lumineuse_8h.html#a23c3f5a0129dad47f58c8433901d206e">NB_LEDS_NOTIFICATION_MACHINES</a></div><div class="ttdeci">#define NB_LEDS_NOTIFICATION_MACHINES</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8h_source.html#l00021">StationLumineuse.h:21</a></div></div>
<div class="ttc" id="a_station_lumineuse_8h_html_ae5598b0513d99829f679ebfca011e485"><div class="ttname"><a href="_station_lumineuse_8h.html#ae5598b0513d99829f679ebfca011e485">NB_LEDS_NOTIFICATION_POUBELLES</a></div><div class="ttdeci">#define NB_LEDS_NOTIFICATION_POUBELLES</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8h_source.html#l00022">StationLumineuse.h:22</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_a3d598a93387fff7407d3b8193c00ba88"><div class="ttname"><a href="class_station_lumineuse.html#a3d598a93387fff7407d3b8193c00ba88">StationLumineuse::getActivationBoiteAuxLettres</a></div><div class="ttdeci">bool getActivationBoiteAuxLettres()</div><div class="ttdoc">Obtient l'état d'activation de la boîte aux lettres.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00194">StationLumineuse.cpp:194</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_a8845e192dd651a35175462c0e7950a87"><div class="ttname"><a href="class_station_lumineuse.html#a8845e192dd651a35175462c0e7950a87">StationLumineuse::getActivationPoubelle</a></div><div class="ttdeci">bool getActivationPoubelle(int id)</div><div class="ttdoc">Obtient l'état d'activation de la poubelle spécifiée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00469">StationLumineuse.cpp:469</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_ad88bf059adefd5ee17a0fd21c63d5ff1"><div class="ttname"><a href="class_station_lumineuse.html#ad88bf059adefd5ee17a0fd21c63d5ff1">StationLumineuse::getActivationMachine</a></div><div class="ttdeci">bool getActivationMachine(int id)</div><div class="ttdoc">Obtient l'état d'activation de la machine spécifiée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00310">StationLumineuse.cpp:310</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00194">StationLumineuse::getActivationBoiteAuxLettres()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00310">StationLumineuse::getActivationMachine()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00469">StationLumineuse::getActivationPoubelle()</a>, <a class="el" href="_station_lumineuse_8h_source.html#l00021">NB_LEDS_NOTIFICATION_MACHINES</a>, <a class="el" href="_station_lumineuse_8h_source.html#l00022">NB_LEDS_NOTIFICATION_POUBELLES</a>, <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>, et <a class="el" href="_serveur_web_8h_source.html#l00032">TAILLE_JSON</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="ad1f9ef4cc49060dcba4bb960eff6bc82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f9ef4cc49060dcba4bb960eff6bc82">&#9670;&nbsp;</a></span>traiterRequeteGETBoite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequeteGETBoite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite une requête HTTP GET relative à la boîte aux lettres. </p>
<p>Cette méthode est appelée lorsqu'une requête HTTP GET relative à la boîte aux lettres est reçue par le serveur web. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00374">374</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequeteGETBoite() : requête = &quot;</span>));</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;Nb arguments : &quot;</span>));</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    Serial.println(args());</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// les arguments du type : /boite?etat=true</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; args(); ++i)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        Serial.print(<span class="stringliteral">&quot;argument : &quot;</span>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        Serial.print(argName(i));</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        Serial.print(<span class="stringliteral">&quot; -&gt; &quot;</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        Serial.println(arg(i));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;etat&quot;</span>))</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordtype">bool</span> etat = (arg(<span class="stringliteral">&quot;etat&quot;</span>) == <span class="stringliteral">&quot;1&quot;</span>) || (arg(<span class="stringliteral">&quot;etat&quot;</span>) == <span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;etat : &quot;</span>));</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        Serial.println(etat);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="comment">// Modifie l&#39;état de la boîte</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ab022e96ddfd2663afffd298791dfef7c">setEtatBoiteAuxLettres</a>(etat);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        send(200,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;             <span class="stringliteral">&quot;{\&quot;boite\&quot;: &quot;</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;             <span class="stringliteral">&quot;\&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="comment">// Récupérer l&#39;état actuel de la boîte aux lettres</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordtype">bool</span> etat = <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#addecd2769104656ca44254d78d4e313e">getEtatBoiteAuxLettres</a>();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="comment">// Répondre à la requête en donnant l&#39;état de la boîte aux lettres</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        String jsonResponse = <span class="stringliteral">&quot;{\&quot;etat\&quot;: &quot;</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        jsonResponse += etat ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        jsonResponse += <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        send(200, <span class="stringliteral">&quot;application/json&quot;</span>, jsonResponse);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="ttc" id="aclass_station_lumineuse_html_ab022e96ddfd2663afffd298791dfef7c"><div class="ttname"><a href="class_station_lumineuse.html#ab022e96ddfd2663afffd298791dfef7c">StationLumineuse::setEtatBoiteAuxLettres</a></div><div class="ttdeci">void setEtatBoiteAuxLettres(bool etat)</div><div class="ttdoc">Modifie l'état de la boîte aux lettres.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00217">StationLumineuse.cpp:217</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_addecd2769104656ca44254d78d4e313e"><div class="ttname"><a href="class_station_lumineuse.html#addecd2769104656ca44254d78d4e313e">StationLumineuse::getEtatBoiteAuxLettres</a></div><div class="ttdeci">bool getEtatBoiteAuxLettres()</div><div class="ttdoc">Obtient l'état de la boîte aux lettres.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00205">StationLumineuse.cpp:205</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_station_lumineuse_8cpp_source.html#l00205">StationLumineuse::getEtatBoiteAuxLettres()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00217">StationLumineuse::setEtatBoiteAuxLettres()</a>, et <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="ab815415ef0f7fa926d278eeca262badd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab815415ef0f7fa926d278eeca262badd">&#9670;&nbsp;</a></span>traiterRequeteGETMachine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequeteGETMachine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite une requête HTTP GET relative à une machine. </p>
<p>Cette méthode est appelée lorsqu'une requête HTTP GET relative à une machine est reçue par le serveur web. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00506">506</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;{</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequeteGETMachine() : requête = &quot;</span>));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;Nb arguments : &quot;</span>));</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    Serial.println(args());</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// les arguments du type : /machine?id=x&amp;etat=true</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; args(); ++i)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        Serial.print(<span class="stringliteral">&quot;argument : &quot;</span>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        Serial.print(argName(i));</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        Serial.print(<span class="stringliteral">&quot; -&gt; &quot;</span>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        Serial.println(arg(i));</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;id&quot;</span>) &amp;&amp; hasArg(<span class="stringliteral">&quot;etat&quot;</span>))</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keywordtype">int</span>  <span class="keywordtype">id</span>   = arg(<span class="stringliteral">&quot;id&quot;</span>).toInt();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordtype">bool</span> etat = (arg(<span class="stringliteral">&quot;etat&quot;</span>) == <span class="stringliteral">&quot;1&quot;</span>) || (arg(<span class="stringliteral">&quot;etat&quot;</span>) == <span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;id : &quot;</span>));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        Serial.println(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;etat : &quot;</span>));</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        Serial.println(etat);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ac9a356b0ae7052e32fcf5343167a34b1">estIdValideMachine</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="comment">// Modifie l&#39;état de la machine</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a1c3667b92c082b8a5de643c9dcf22dd2">setEtatMachine</a>(<span class="keywordtype">id</span>, etat);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            send(200,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                 <span class="stringliteral">&quot;{\&quot;machine\&quot;: &quot;</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                 <span class="stringliteral">&quot;\&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            send(404,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;notFound\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                 <span class="stringliteral">&quot;\&quot;La machine demandée n&#39;existe pas.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;id&quot;</span>))</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordtype">int</span> <span class="keywordtype">id</span> = arg(<span class="stringliteral">&quot;id&quot;</span>).toInt();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ac9a356b0ae7052e32fcf5343167a34b1">estIdValideMachine</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="comment">// Récupérer l&#39;état actuel de la machine</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordtype">bool</span> etat = <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ae9e5d023c9a1612621bade3f803e802c">getEtatMachine</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="comment">// Répondre à la requête en donnant l&#39;état de la machine</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            String jsonResponse = <span class="stringliteral">&quot;{\&quot;id\&quot;: &quot;</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            jsonResponse += id;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            jsonResponse += <span class="stringliteral">&quot;, \&quot;etat\&quot;: &quot;</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            jsonResponse += etat ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            jsonResponse += <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            send(200, <span class="stringliteral">&quot;application/json&quot;</span>, jsonResponse);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            send(404,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;notFound\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                 <span class="stringliteral">&quot;\&quot;La machine demandée n&#39;existe pas.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        String message = <span class="stringliteral">&quot;400 Bad Request\n\n&quot;</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        message += <span class="stringliteral">&quot;URI: &quot;</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        message += uri();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        message += <span class="stringliteral">&quot;\nMethod: &quot;</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        message += (method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        message += <span class="stringliteral">&quot;\nArguments: &quot;</span>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        message += args();</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        message += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; args(); i++)</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            message += <span class="stringliteral">&quot; &quot;</span> + argName(i) + <span class="stringliteral">&quot;: &quot;</span> + arg(i) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        send(400, <span class="stringliteral">&quot;text/plain&quot;</span>, message);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div>
<div class="ttc" id="aclass_station_lumineuse_html_a1c3667b92c082b8a5de643c9dcf22dd2"><div class="ttname"><a href="class_station_lumineuse.html#a1c3667b92c082b8a5de643c9dcf22dd2">StationLumineuse::setEtatMachine</a></div><div class="ttdeci">void setEtatMachine(int numeroMachine, bool etat)</div><div class="ttdoc">Modifie l'état de la machine spécifiée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00362">StationLumineuse.cpp:362</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_ac9a356b0ae7052e32fcf5343167a34b1"><div class="ttname"><a href="class_station_lumineuse.html#ac9a356b0ae7052e32fcf5343167a34b1">StationLumineuse::estIdValideMachine</a></div><div class="ttdeci">bool estIdValideMachine(int numeroMachine)</div><div class="ttdoc">Vérifie si l'ID de la machine est valide.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00330">StationLumineuse.cpp:330</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_ae9e5d023c9a1612621bade3f803e802c"><div class="ttname"><a href="class_station_lumineuse.html#ae9e5d023c9a1612621bade3f803e802c">StationLumineuse::getEtatMachine</a></div><div class="ttdeci">bool getEtatMachine(int numeroMachine)</div><div class="ttdoc">Récupère l'état de la machine donnée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00342">StationLumineuse.cpp:342</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_station_lumineuse_8cpp_source.html#l00330">StationLumineuse::estIdValideMachine()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00342">StationLumineuse::getEtatMachine()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00362">StationLumineuse::setEtatMachine()</a>, et <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="a45026dbf6cea60651ece33b7ea8f0b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45026dbf6cea60651ece33b7ea8f0b01">&#9670;&nbsp;</a></span>traiterRequeteGETNotifications()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequeteGETNotifications </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite la requête GET pour obtenir l'état des notifications. </p>
<p>Crée un objet JSON contenant l'état de la boîte aux lettres, des machines et des poubelles. Elle utilise les méthodes getEtatBoiteAuxLettres(), getEtatMachines() et getEtatPoubelle() de l'objet stationLumineuse pour remplir l'objet JSON. Ensuite, elle sérialise cet objet JSON et le renvoie en tant que réponse à la requête GET sous forme d'un document JSON. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00164">164</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequeteGETNotifications() : requête = &quot;</span>));</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.clear();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;boite&quot;</span>] = <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#addecd2769104656ca44254d78d4e313e">getEtatBoiteAuxLettres</a>();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    JsonArray machines    = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.createNestedArray(<span class="stringliteral">&quot;machines&quot;</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="_station_lumineuse_8h.html#a23c3f5a0129dad47f58c8433901d206e">NB_LEDS_NOTIFICATION_MACHINES</a>; ++i)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        machines.add(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ae9e5d023c9a1612621bade3f803e802c">getEtatMachine</a>(i));</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    JsonArray poubelle = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.createNestedArray(<span class="stringliteral">&quot;poubelles&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="_station_lumineuse_8h.html#ae5598b0513d99829f679ebfca011e485">NB_LEDS_NOTIFICATION_POUBELLES</a>; ++i)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        poubelle.add(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a29206ac7628109032548680e1de45294">getEtatPoubelle</a>(i));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;JSON : &quot;</span>));</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    serializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, Serial);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    Serial.println();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">char</span> buffer[<a class="code" href="_serveur_web_8h.html#a11a025c8bafe7b0ac9a8cf71dab9e79e">TAILLE_JSON</a>];</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    serializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, buffer);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    send(200, <span class="stringliteral">&quot;application/json&quot;</span>, buffer);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="ttc" id="aclass_station_lumineuse_html_a29206ac7628109032548680e1de45294"><div class="ttname"><a href="class_station_lumineuse.html#a29206ac7628109032548680e1de45294">StationLumineuse::getEtatPoubelle</a></div><div class="ttdeci">bool getEtatPoubelle(int numeroPoubelle)</div><div class="ttdoc">Obtient l'état de la poubelle spécifiée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00503">StationLumineuse.cpp:503</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00205">StationLumineuse::getEtatBoiteAuxLettres()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00342">StationLumineuse::getEtatMachine()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00503">StationLumineuse::getEtatPoubelle()</a>, <a class="el" href="_station_lumineuse_8h_source.html#l00021">NB_LEDS_NOTIFICATION_MACHINES</a>, <a class="el" href="_station_lumineuse_8h_source.html#l00022">NB_LEDS_NOTIFICATION_POUBELLES</a>, <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>, et <a class="el" href="_serveur_web_8h_source.html#l00032">TAILLE_JSON</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="a97d7d95c807505d42c9ffd0b6ed62198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d7d95c807505d42c9ffd0b6ed62198">&#9670;&nbsp;</a></span>traiterRequeteGETPoubelle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequeteGETPoubelle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite une requête HTTP GET relative à une poubelle. </p>
<p>Cette méthode est appelée lorsqu'une requête HTTP GET relative à une poubelle est reçue par le serveur web. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00676">676</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;{</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequeteGETPoubelle() : requête = &quot;</span>));</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;Nb arguments : &quot;</span>));</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    Serial.println(args());</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// les arguments du type : /poubelle?id=x&amp;etat=true</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; args(); ++i)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        Serial.print(<span class="stringliteral">&quot;argument : &quot;</span>);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        Serial.print(argName(i));</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        Serial.print(<span class="stringliteral">&quot; -&gt; &quot;</span>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        Serial.println(arg(i));</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;id&quot;</span>) &amp;&amp; hasArg(<span class="stringliteral">&quot;etat&quot;</span>))</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordtype">int</span>  <span class="keywordtype">id</span>   = arg(<span class="stringliteral">&quot;id&quot;</span>).toInt();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordtype">bool</span> etat = (arg(<span class="stringliteral">&quot;etat&quot;</span>) == <span class="stringliteral">&quot;1&quot;</span>) || (arg(<span class="stringliteral">&quot;etat&quot;</span>) == <span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;id : &quot;</span>));</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        Serial.println(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;etat : &quot;</span>));</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        Serial.println(etat);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a1db059667a9a7eca039dfdcaadb293ed">estIdValidePoubelle</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="comment">// Modifie l&#39;état de la poubelle</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#aee2d61f8cad8bd21600e6754c6f73c9f">setEtatPoubelle</a>(<span class="keywordtype">id</span>, etat);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            send(200,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                 <span class="stringliteral">&quot;{\&quot;poubelle\&quot;: &quot;</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                 <span class="stringliteral">&quot;\&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            send(404,</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;notFound\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                 <span class="stringliteral">&quot;\&quot;La poubelle demandée n&#39;existe pas.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;id&quot;</span>))</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordtype">int</span> <span class="keywordtype">id</span> = arg(<span class="stringliteral">&quot;id&quot;</span>).toInt();</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a1db059667a9a7eca039dfdcaadb293ed">estIdValidePoubelle</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <span class="comment">// Récupérer l&#39;état actuel de la poubelle</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="keywordtype">bool</span> etat = <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a29206ac7628109032548680e1de45294">getEtatPoubelle</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="comment">// Répondre à la requête en donnant l&#39;état de la Poubelle</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            String jsonResponse = <span class="stringliteral">&quot;{\&quot;id\&quot;: &quot;</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            jsonResponse += id;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            jsonResponse += <span class="stringliteral">&quot;, \&quot;etat\&quot;: &quot;</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            jsonResponse += etat ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            jsonResponse += <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            send(200, <span class="stringliteral">&quot;application/json&quot;</span>, jsonResponse);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            send(404,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;notFound\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                 <span class="stringliteral">&quot;\&quot;La poubelle demandée n&#39;existe pas.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        String message = <span class="stringliteral">&quot;400 Bad Request\n\n&quot;</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        message += <span class="stringliteral">&quot;URI: &quot;</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        message += uri();</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        message += <span class="stringliteral">&quot;\nMethod: &quot;</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        message += (method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        message += <span class="stringliteral">&quot;\nArguments: &quot;</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        message += args();</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        message += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; args(); i++)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            message += <span class="stringliteral">&quot; &quot;</span> + argName(i) + <span class="stringliteral">&quot;: &quot;</span> + arg(i) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        send(400, <span class="stringliteral">&quot;text/plain&quot;</span>, message);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div>
<div class="ttc" id="aclass_station_lumineuse_html_a1db059667a9a7eca039dfdcaadb293ed"><div class="ttname"><a href="class_station_lumineuse.html#a1db059667a9a7eca039dfdcaadb293ed">StationLumineuse::estIdValidePoubelle</a></div><div class="ttdeci">bool estIdValidePoubelle(int numeroPoubelle)</div><div class="ttdoc">Vérifie si l'identifiant de la poubelle est valide.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00490">StationLumineuse.cpp:490</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_aee2d61f8cad8bd21600e6754c6f73c9f"><div class="ttname"><a href="class_station_lumineuse.html#aee2d61f8cad8bd21600e6754c6f73c9f">StationLumineuse::setEtatPoubelle</a></div><div class="ttdeci">void setEtatPoubelle(int numeroPoubelle, bool etat)</div><div class="ttdoc">Modifie l'état de la poubelle spécifiée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00523">StationLumineuse.cpp:523</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_station_lumineuse_8cpp_source.html#l00490">StationLumineuse::estIdValidePoubelle()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00503">StationLumineuse::getEtatPoubelle()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00523">StationLumineuse::setEtatPoubelle()</a>, et <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="aaecca9c5962378e9adb491b935371dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaecca9c5962378e9adb491b935371dd8">&#9670;&nbsp;</a></span>traiterRequeteNonTrouvee()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequeteNonTrouvee </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite une requête qui n'a pas été trouvée. </p>
<p>Récupère les informations de la requête (URI, méthode, arguments) et les concatène dans un message d'erreur de type 404. Envoie ensuite ce message au client qui a effectué la requête. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00866">866</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;{</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequeteNonTrouvee() : requête = &quot;</span>));</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    String message = <span class="stringliteral">&quot;404 File Not Found\n\n&quot;</span>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    message += <span class="stringliteral">&quot;URI: &quot;</span>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    message += uri();</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    message += <span class="stringliteral">&quot;\nMethod: &quot;</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    message += (method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    message += <span class="stringliteral">&quot;\nArguments: &quot;</span>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    message += args();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    message += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; args(); i++)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        message += <span class="stringliteral">&quot; &quot;</span> + argName(i) + <span class="stringliteral">&quot;: &quot;</span> + arg(i) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    send(404, <span class="stringliteral">&quot;text/plain&quot;</span>, message);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="aefd981d35334c49dffc5bdab2ebc8dea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd981d35334c49dffc5bdab2ebc8dea">&#9670;&nbsp;</a></span>traiterRequetePOSTActivation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequetePOSTActivation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite une requête POST pour modifier les activations. </p>
<p>Cette méthode traite une requête POST pour modifier les activations de la station lumineuse. Elle récupère les données de la requête, telles que l'état, l'ID et le module concernés, à l'aide de la méthode arg() de la classe <a class="el" href="class_web_server.html">WebServer</a>. Ensuite, elle utilise les méthodes appropriées de la classe <a class="el" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse.">StationLumineuse</a> pour modifier les activations correspondantes. La méthode renvoie une réponse JSON indiquant le succès de l'opération ou une erreur si les données de la requête sont incorrectes ou invalides. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00249">249</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequetePOSTActivation() : requête = &quot;</span>));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;plain&quot;</span>) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        Serial.println(F(<span class="stringliteral">&quot;Erreur !&quot;</span>));</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        send(400,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: \&quot;La demande est vide ou &quot;</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;             <span class="stringliteral">&quot;incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    String body = arg(<span class="stringliteral">&quot;plain&quot;</span>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    Serial.println(body);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    DeserializationError erreur = deserializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, body);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span>(erreur)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;Erreur deserializeJson() : &quot;</span>));</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        Serial.println(erreur.f_str());</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        send(400,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: \&quot;La demande est mal &quot;</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;             <span class="stringliteral">&quot;exprimée ou incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        JsonObject objetJSON = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.as&lt;JsonObject&gt;();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span>(objetJSON.containsKey(<span class="stringliteral">&quot;etat&quot;</span>) &amp;&amp; objetJSON.containsKey(<span class="stringliteral">&quot;id&quot;</span>) &amp;&amp;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;           objetJSON.containsKey(<span class="stringliteral">&quot;module&quot;</span>))</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;module : &quot;</span>));</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;module&quot;</span>].as&lt;String&gt;());</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;id : &quot;</span>));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;id&quot;</span>].as&lt;int&gt;());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;etat : &quot;</span>));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;bool&gt;());</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            String module = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;module&quot;</span>].as&lt;String&gt;();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordtype">int</span>    <span class="keywordtype">id</span>     = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;id&quot;</span>].as&lt;<span class="keywordtype">int</span>&gt;();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordtype">bool</span>   etat   = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span>(module == <span class="stringliteral">&quot;machine&quot;</span>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ac9a356b0ae7052e32fcf5343167a34b1">estIdValideMachine</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a7ee3fb65b5512569c5ca7178b6633ced">setActivationMachine</a>(<span class="keywordtype">id</span>, etat);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                    send(200, <span class="stringliteral">&quot;application/json&quot;</span>, <span class="stringliteral">&quot;{\&quot;machine\&quot;: \&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    send(404,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                         <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                         <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;notFound\&quot;, \&quot;message\&quot;: \&quot;La machine demandée &quot;</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                         <span class="stringliteral">&quot;n&#39;existe pas.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(module == <span class="stringliteral">&quot;poubelle&quot;</span>)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a1db059667a9a7eca039dfdcaadb293ed">estIdValidePoubelle</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a314286cebeced9b043f23f919c986c45">setActivationPoubelle</a>(<span class="keywordtype">id</span>, etat);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    send(200, <span class="stringliteral">&quot;application/json&quot;</span>, <span class="stringliteral">&quot;{\&quot;poubelle\&quot;: \&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    send(404,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                         <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                         <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;notFound\&quot;, \&quot;message\&quot;: \&quot;La poubelle &quot;</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                         <span class="stringliteral">&quot;demandée n&#39;existe pas.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(module == <span class="stringliteral">&quot;boite&quot;</span>)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="comment">// Pour la boite aux lettres, il n&#39;y a pas d&#39;ID spécifique.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a6d99a6519561c4aebd16317a717e9ef8">setActivationBoiteAuxLettres</a>(etat);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                send(200, <span class="stringliteral">&quot;application/json&quot;</span>, <span class="stringliteral">&quot;{\&quot;boite\&quot;: \&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                Serial.print(F(<span class="stringliteral">&quot;Erreur : module non reconnu&quot;</span>));</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                send(400,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                     <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                     <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: \&quot;Le module &quot;</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                     <span class="stringliteral">&quot;spécifié n&#39;est pas reconnu.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;Erreur : champ etat, id ou module manquant&quot;</span>));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            send(400,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: \&quot;La demande est &quot;</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                 <span class="stringliteral">&quot;incomplète.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="ttc" id="aclass_station_lumineuse_html_a314286cebeced9b043f23f919c986c45"><div class="ttname"><a href="class_station_lumineuse.html#a314286cebeced9b043f23f919c986c45">StationLumineuse::setActivationPoubelle</a></div><div class="ttdeci">void setActivationPoubelle(int id, bool etat)</div><div class="ttdoc">Modifie l'état d'activation de la poubelle spécifiée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00446">StationLumineuse.cpp:446</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_a6d99a6519561c4aebd16317a717e9ef8"><div class="ttname"><a href="class_station_lumineuse.html#a6d99a6519561c4aebd16317a717e9ef8">StationLumineuse::setActivationBoiteAuxLettres</a></div><div class="ttdeci">void setActivationBoiteAuxLettres(bool etat)</div><div class="ttdoc">Modifie l'état d'activation de la boîte aux lettres.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00180">StationLumineuse.cpp:180</a></div></div>
<div class="ttc" id="aclass_station_lumineuse_html_a7ee3fb65b5512569c5ca7178b6633ced"><div class="ttname"><a href="class_station_lumineuse.html#a7ee3fb65b5512569c5ca7178b6633ced">StationLumineuse::setActivationMachine</a></div><div class="ttdeci">void setActivationMachine(int id, bool etat)</div><div class="ttdoc">Modifie l'état d'activation de la machine spécifiée.</div><div class="ttdef"><b>Definition:</b> <a href="_station_lumineuse_8cpp_source.html#l00287">StationLumineuse.cpp:287</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00330">StationLumineuse::estIdValideMachine()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00490">StationLumineuse::estIdValidePoubelle()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00180">StationLumineuse::setActivationBoiteAuxLettres()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00287">StationLumineuse::setActivationMachine()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00446">StationLumineuse::setActivationPoubelle()</a>, et <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="aae07d478b576b3bb9c71f2d5e3a8c36e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae07d478b576b3bb9c71f2d5e3a8c36e">&#9670;&nbsp;</a></span>traiterRequetePOSTBoite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequetePOSTBoite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite la requête POST de la boîte aux lettres. </p>
<p>Récupère la demande POST de la boîte aux lettres envoyée par le client et vérifie si elle est correcte. Ensuite, détermine l'état de la boîte aux lettres et l'enregistre dans l'objet <a class="el" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse.">StationLumineuse</a>. Si la demande est correcte, envoie une réponse JSON de confirmation au client. Si la demande est incorrecte, envoie une réponse JSON d'erreur correspondante au client. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00431">431</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;{</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequetePOSTBoite() : requête = &quot;</span>));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;plain&quot;</span>) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        Serial.println(F(<span class="stringliteral">&quot;Erreur !&quot;</span>));</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        send(400,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;             <span class="stringliteral">&quot;\&quot; La demande est vide ou incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    String body = arg(<span class="stringliteral">&quot;plain&quot;</span>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    Serial.println(body);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    DeserializationError erreur = deserializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, body);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span>(erreur)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;Erreur deserializeJson() : &quot;</span>));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        Serial.println(erreur.f_str());</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        send(400,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;             <span class="stringliteral">&quot;\&quot;La demande est mal exprimée ou incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        JsonObject objetJSON = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.as&lt;JsonObject&gt;();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span>(objetJSON.containsKey(<span class="stringliteral">&quot;etat&quot;</span>))</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;etat : &quot;</span>));</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;bool&gt;());</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ab022e96ddfd2663afffd298791dfef7c">setEtatBoiteAuxLettres</a>(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;bool&gt;());</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            send(200,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                 <span class="stringliteral">&quot;{\&quot;boite\&quot;: &quot;</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                 <span class="stringliteral">&quot;\&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;Erreur : champ etat manquant&quot;</span>));</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            send(400,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                 <span class="stringliteral">&quot;\&quot;La demande est incomplète.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00217">StationLumineuse::setEtatBoiteAuxLettres()</a>, et <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="af7eadfab5c95b0789003a5c436998638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7eadfab5c95b0789003a5c436998638">&#9670;&nbsp;</a></span>traiterRequetePOSTMachine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequetePOSTMachine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite la requête POST pour modifier l'état d'une machine. </p>
<p>Récupère la demande POST de la machine envoyée par le client et vérifie si elle est correcte. Ensuite, détermine l'état de la machine et l'enregistre dans l'objet <a class="el" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse.">StationLumineuse</a>. Si la demande est correcte, envoie une réponse JSON de confirmation au client. Si la demande est incorrecte, envoie une réponse JSON d'erreur correspondante au client. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00605">605</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequetePOSTMachine() : requête = &quot;</span>));</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;plain&quot;</span>) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        Serial.println(F(<span class="stringliteral">&quot;Erreur !&quot;</span>));</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        send(400,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;             <span class="stringliteral">&quot;\&quot;La demande est vide ou incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    String body = arg(<span class="stringliteral">&quot;plain&quot;</span>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    Serial.println(body);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    DeserializationError erreur = deserializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, body);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span>(erreur)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;Erreur deserializeJson() : &quot;</span>));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        Serial.println(erreur.f_str());</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        send(400,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;             <span class="stringliteral">&quot;\&quot;La demande est mal exprimée ou incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordtype">int</span>  numeroMachine = <a class="code" href="class_serveur_web.html#a2f7bf79f60507ab05e101758c5cd15c8">extraireId</a>();</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordtype">bool</span> etatMachine   = <a class="code" href="class_serveur_web.html#a3c6c900eb56c93d7755b4acfee01d0d6">extraireEtat</a>();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#ac9a356b0ae7052e32fcf5343167a34b1">estIdValideMachine</a>(numeroMachine))</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a1c3667b92c082b8a5de643c9dcf22dd2">setEtatMachine</a>(numeroMachine, etatMachine);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            send(200,</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                 <span class="stringliteral">&quot;{\&quot;machine\&quot;: &quot;</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                 <span class="stringliteral">&quot;\&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;Erreur : champ id invalide&quot;</span>));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            send(400,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                 <span class="stringliteral">&quot;\&quot;La demande est invalide.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;}</div>
<div class="ttc" id="aclass_serveur_web_html_a2f7bf79f60507ab05e101758c5cd15c8"><div class="ttname"><a href="class_serveur_web.html#a2f7bf79f60507ab05e101758c5cd15c8">ServeurWeb::extraireId</a></div><div class="ttdeci">int extraireId()</div><div class="ttdoc">Extrait l'id dans les données JSON.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00895">ServeurWeb.cpp:895</a></div></div>
<div class="ttc" id="aclass_serveur_web_html_a3c6c900eb56c93d7755b4acfee01d0d6"><div class="ttname"><a href="class_serveur_web.html#a3c6c900eb56c93d7755b4acfee01d0d6">ServeurWeb::extraireEtat</a></div><div class="ttdeci">bool extraireEtat()</div><div class="ttdoc">Extrait l'état dans les données JSON.</div><div class="ttdef"><b>Definition:</b> <a href="_serveur_web_8cpp_source.html#l00914">ServeurWeb.cpp:914</a></div></div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00330">StationLumineuse::estIdValideMachine()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00914">extraireEtat()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00895">extraireId()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00362">StationLumineuse::setEtatMachine()</a>, et <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="a0cee2b47156893da6dd682cd55e91d70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cee2b47156893da6dd682cd55e91d70">&#9670;&nbsp;</a></span>traiterRequetePOSTPoubelle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequetePOSTPoubelle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traite la requête POST pour modifier l'état d'une poubelle. </p>
<p>Récupère la demande POST de la poubelle envoyée par le client et vérifie si elle est correcte. Ensuite, détermine l'état de la poubelle et l'enregistre dans l'objet <a class="el" href="class_station_lumineuse.html" title="Déclaration de la classe StationLumineuse.">StationLumineuse</a>. Si la demande est correcte, envoie une réponse JSON de confirmation au client. Si la demande est incorrecte, envoie une réponse JSON d'erreur correspondante au client. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00775">775</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;{</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;ServeurWeb::traiterRequetePOSTPoubelle() : requête = &quot;</span>));</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    Serial.println((method() == HTTP_GET) ? <span class="stringliteral">&quot;GET&quot;</span> : <span class="stringliteral">&quot;POST&quot;</span>);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    Serial.print(F(<span class="stringliteral">&quot;URI : &quot;</span>));</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    Serial.println(uri());</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span>(hasArg(<span class="stringliteral">&quot;plain&quot;</span>) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        Serial.println(F(<span class="stringliteral">&quot;Erreur !&quot;</span>));</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        send(400,</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;             <span class="stringliteral">&quot;\&quot;La demande est vide ou incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    String body = arg(<span class="stringliteral">&quot;plain&quot;</span>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    Serial.println(body);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    DeserializationError erreur = deserializeJson(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>, body);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span>(erreur)</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        Serial.print(F(<span class="stringliteral">&quot;Erreur deserializeJson() : &quot;</span>));</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        Serial.println(erreur.f_str());</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        send(400,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;             <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;             <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;             <span class="stringliteral">&quot;\&quot;La demande est mal exprimée ou incorrecte.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        JsonObject objetJSON = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>.as&lt;JsonObject&gt;();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">if</span>(objetJSON.containsKey(<span class="stringliteral">&quot;etat&quot;</span>) &amp;&amp; objetJSON.containsKey(<span class="stringliteral">&quot;id&quot;</span>))</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;id : &quot;</span>));</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;id&quot;</span>].as&lt;int&gt;());</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;etat : &quot;</span>));</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            Serial.println(<a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;bool&gt;());</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="comment">// Modifier l&#39;état de la Poubelle ici</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="keywordtype">int</span>  numeroPoubelle = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;id&quot;</span>].as&lt;<span class="keywordtype">int</span>&gt;();</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="keywordtype">bool</span> etatPoubelle   = <a class="code" href="class_serveur_web.html#a4566392acbd1940336f6a527ba44af75">documentJSON</a>[<span class="stringliteral">&quot;etat&quot;</span>].as&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#a1db059667a9a7eca039dfdcaadb293ed">estIdValidePoubelle</a>(numeroPoubelle))</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                <a class="code" href="class_serveur_web.html#a8d37983975578b93e06b8792eb5943c4">stationLumineuse</a>-&gt;<a class="code" href="class_station_lumineuse.html#aee2d61f8cad8bd21600e6754c6f73c9f">setEtatPoubelle</a>(numeroPoubelle, etatPoubelle);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                send(200,</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                     <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                     <span class="stringliteral">&quot;{\&quot;poubelle\&quot;: &quot;</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                     <span class="stringliteral">&quot;\&quot;ok\&quot;}&quot;</span>);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                send(404,</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                     <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                     <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;notFound\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                     <span class="stringliteral">&quot;\&quot;La poubelle demandée n&#39;existe pas.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="preprocessor">#ifdef DEBUG_SERVEUR_WEB</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            Serial.print(F(<span class="stringliteral">&quot;Erreur : champ etat ou numeroPoubelle manquant&quot;</span>));</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            send(400,</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                 <span class="stringliteral">&quot;application/json&quot;</span>,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                 <span class="stringliteral">&quot;{\&quot;error\&quot;: { \&quot;code\&quot;: \&quot;invalidRequest\&quot;, \&quot;message\&quot;: &quot;</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                 <span class="stringliteral">&quot;\&quot;La demande est incomplète.\&quot;}}&quot;</span>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Références <a class="el" href="_serveur_web_8h_source.html#l00044">documentJSON</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00490">StationLumineuse::estIdValidePoubelle()</a>, <a class="el" href="_station_lumineuse_8cpp_source.html#l00523">StationLumineuse::setEtatPoubelle()</a>, et <a class="el" href="_serveur_web_8h_source.html#l00043">stationLumineuse</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00030">demarrer()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00110">installerGestionnairesRequetes()</a>.</p>

</div>
</div>
<a id="ae67b92478d41e2b4c9b8b172c6360418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae67b92478d41e2b4c9b8b172c6360418">&#9670;&nbsp;</a></span>traiterRequetes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServeurWeb::traiterRequetes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>traite les requêtes reçues par le serveur web </p>
<p>Appelle la méthode handleClient() du serveur web pour traiter les requêtes reçues par le serveur. </p>

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8cpp_source.html#l00072">72</a> du fichier <a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    handleClient();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentation des champs</h2>
<a id="a4566392acbd1940336f6a527ba44af75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4566392acbd1940336f6a527ba44af75">&#9670;&nbsp;</a></span>documentJSON</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StaticJsonDocument&lt;<a class="el" href="_serveur_web_8h.html#a11a025c8bafe7b0ac9a8cf71dab9e79e">TAILLE_JSON</a>&gt; ServeurWeb::documentJSON</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8h_source.html#l00044">44</a> du fichier <a class="el" href="_serveur_web_8h_source.html">ServeurWeb.h</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00914">extraireEtat()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00895">extraireId()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00203">traiterRequeteGETActivations()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00164">traiterRequeteGETNotifications()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00249">traiterRequetePOSTActivation()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00431">traiterRequetePOSTBoite()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00605">traiterRequetePOSTMachine()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00775">traiterRequetePOSTPoubelle()</a>.</p>

</div>
</div>
<a id="a8d37983975578b93e06b8792eb5943c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d37983975578b93e06b8792eb5943c4">&#9670;&nbsp;</a></span>stationLumineuse</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_station_lumineuse.html">StationLumineuse</a>* ServeurWeb::stationLumineuse</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Définition à la ligne <a class="el" href="_serveur_web_8h_source.html#l00043">43</a> du fichier <a class="el" href="_serveur_web_8h_source.html">ServeurWeb.h</a>.</p>

<p class="reference">Référencé par <a class="el" href="_serveur_web_8cpp_source.html#l00203">traiterRequeteGETActivations()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00374">traiterRequeteGETBoite()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00506">traiterRequeteGETMachine()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00164">traiterRequeteGETNotifications()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00676">traiterRequeteGETPoubelle()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00249">traiterRequetePOSTActivation()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00431">traiterRequetePOSTBoite()</a>, <a class="el" href="_serveur_web_8cpp_source.html#l00605">traiterRequetePOSTMachine()</a>, et <a class="el" href="_serveur_web_8cpp_source.html#l00775">traiterRequetePOSTPoubelle()</a>.</p>

</div>
</div>
<hr/>La documentation de cette classe a été générée à partir du fichier suivant :<ul>
<li><a class="el" href="_serveur_web_8h_source.html">ServeurWeb.h</a></li>
<li><a class="el" href="_serveur_web_8cpp_source.html">ServeurWeb.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_serveur_web.html">ServeurWeb</a></li>
    <li class="footer"><img class="footer" src="lasalle-logo.png" height="31" alt="La Salle Avignon"/>&nbsp;<b>Campus La Salle Avignon</b>&nbsp;-&nbsp;9 Rue Notre Dame des 7 douleurs&nbsp;-&nbsp;BP 50165&nbsp;-&nbsp;84008 Avignon&nbsp;-&nbsp;Généré le Dimanche 28 Mai 2023 09:59:08 pour Projet domotifications par&nbsp;<a href="https://www.doxygen.org/index.html">doxygen</a>&nbsp;1.9.1&nbsp;</li>
  </ul>
</div>
</body>
</html>
